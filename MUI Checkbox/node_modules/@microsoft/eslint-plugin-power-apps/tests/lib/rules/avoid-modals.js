// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

"use strict";

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

const rule = require("../../../lib/rules/avoid-modals");
const RuleTester = require("eslint").RuleTester;

//------------------------------------------------------------------------------
// Helpers
//------------------------------------------------------------------------------

const ruleTester = new RuleTester();
const MESSAGE_ID = "message1";

ruleTester.run("avoid-modals", rule, {
    valid: [
        `    // VALID
             window.open("/pages/mypage.htm", "_blank", "status:false;dialogWidth:300px;dialogHeight:300px");
        `
    ],
    invalid: [
        {
            code:
            `   // INVALID
                var ret1 = showModalDialog("/pages/mypage.htm", { value1: "value1", value2: "value2" }, "status:false;dialogWidth:300px;dialogHeight:300px");
                var ret2 = window.showModalDialog("/pages/mypage.htm", window, "status:false;dialogWidth:300px;dialogHeight:300px");
                var ret3 = parent.showModalDialog("/pages/mypage.htm");
            `,
            errors: [
                { messageId: MESSAGE_ID, line: 2 },
                { messageId: MESSAGE_ID, line: 3 },
                { messageId: MESSAGE_ID, line: 4 }
            ]
        }
    ]
});
